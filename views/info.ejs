<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <title>Github Repo Commit Finder</title>
</head>
<body>

    <nav class="navbar navbar-dark bg-primary mb-3">
        <div class="container">
            <a href="#" class="navbar-brand">Github Repo Commit Finder</a>
        </div>
    </nav>
    <div class="container searchContainer">
        <form action="/data" method="post">
            <div class="search card card-body">
                <p class="lead">Enter Github username</p>
                <input name="username" type="text" id="searchUser" class="form-control" placeholder="GitHub Username...." required>
            <br>
                <p class="lead">Enter Github repo name</p>
                <input name="reponame" type="text" id="searchUser" class="form-control" placeholder="GitHub repo name...." required>
            <br>
                <button type="submit" class="btn btn-primary">Search</button>
            </div>
        </form>
        <div id="profile">
            <% if (data[0]) { %>
                <% for( index in data) { %>
                    <div class="card card-body mb-3">
                        <div class="row">                    
                            <div class="col-md-3">
                                <img class="img-fluid mb-2" src="<%= data[index].author.avatar_url %>">
                                <a href="<%= data[index].author.html_url %>" target="_blank" class="btn btn-primary btn-block mb-4">View Commiter Profile</a>
                            </div>
                            <div class="col-md-9">
                                <ul class="list-group">
                                    <li class="list-group-item">Name: <%= data[index].commit.author.name %></li>
                                    <li class="list-group-item">Commit Date: <%= data[index].commit.author.date %></li>
                                    <li class="list-group-item">Commit Message: <%= data[index].commit.message %></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                <% } %>
            <% } else { %>
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="error-template">
                                <center>
                                <h1>
                                    Oops!</h1>
                                <h2>
                                    404 Data Not Found</h2>
                                <div class="error-details">
                                    Sorry, an error has occured, either the username or reponame provide is wrong!
                                </div>
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
        

    </div>

    <footer class="mt-5 p-3 text-center bg-light">
        Github Repo Commit Finder &copy;
    </footer>



    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

</body>
</html>